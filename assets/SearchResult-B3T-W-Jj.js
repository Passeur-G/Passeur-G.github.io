import{l as K,i as Z,m as ee,p as V,q as te,s as se,v as oe,x as ae,j as R,y as C,z as le,A as G,k as s,B as O,C as P,R as q,D as re,E as ne,G as ie,H as ue,I as pe,J as he,K as ce,L as ve,O as de,M as ge,N as me,P as ye,Q as ze,S as Se,T as Q}from"./app-B455BBMW.js";const Ee=["/Collection.html","/","/about.html","/intro.html","/Projects/","/demo/","/demo/disable.html","/demo/encrypt.html","/demo/layout.html","/demo/markdown.html","/demo/page.html","/zh/Collection.html","/zh/","/zh/about.html","/zh/intro.html","/posts/Database/","/posts/DevelopmentKit/","/posts/OtherTutorials/","/zh/demo/","/zh/demo/disable.html","/zh/demo/encrypt.html","/zh/demo/layout.html","/zh/demo/markdown.html","/zh/demo/page.html","/posts/Database/PowerDesigner/","/posts/Database/VMware/","/posts/DevelopmentKit/Eclipse/","/posts/DevelopmentKit/Idea/","/posts/DevelopmentKit/VScode/","/posts/FrameSet/Mybatis/","/posts/FrameSet/MybatisPlus/","/posts/FrameSet/React/","/posts/FrameSet/Vue/","/posts/FrameSet/Wechat/","/posts/FrontEnd/CSS/","/posts/FrontEnd/HTML/","/posts/FrontEnd/JavaScript/","/posts/FrontEnd/NodeEles/","/posts/LearningNotes/Algorithm/","/posts/LearningNotes/CommandMemo/","/posts/LearningNotes/DataStructure/","/posts/LearningNotes/Go/","/posts/LearningNotes/Java/","/posts/LearningNotes/Networks/","/posts/LearningNotes/Python/","/posts/LearningNotes/System/","/posts/LearningNotes/liunx/","/posts/LearningNotes/principles/","/posts/OtherTutorials/Note/","/posts/OtherTutorials/OverWall/","/posts/OtherTutorials/encoding/","/posts/SpringAll/SpingBoot/","/posts/SpringAll/Spring/","/posts/SpringAll/SpringCloud/","/posts/SpringAll/SpringMVC/","/posts/ToolSet/Docker/","/posts/ToolSet/Git/","/posts/ToolSet/Github/","/posts/ToolSet/Maven/","/posts/ToolSet/MySQL/","/posts/ToolSet/Navicat/","/posts/ToolSet/Postman/","/posts/ToolSet/Redis/","/zh/posts/Database/","/zh/posts/DevelopmentKit/","/zh/posts/OtherTutorials/","/zh/posts/Database/PowerDesigner/","/zh/posts/Database/VMware/","/zh/posts/DevelopmentKit/Eclipse/","/zh/posts/DevelopmentKit/Idea/","/zh/posts/DevelopmentKit/VScode/","/zh/posts/FrameSet/Mybatis/","/zh/posts/FrameSet/MybatisPlus/","/zh/posts/FrameSet/React/","/zh/posts/FrameSet/Vue/","/zh/posts/FrameSet/Wechat/","/zh/posts/FrontEnd/CSS/","/zh/posts/FrontEnd/HTML/","/zh/posts/FrontEnd/JavaScript/","/zh/posts/FrontEnd/NodeEles/","/zh/posts/LearningNotes/Algorithm/","/zh/posts/LearningNotes/CommandMemo/","/zh/posts/LearningNotes/DataStructure/","/zh/posts/LearningNotes/Go/","/zh/posts/LearningNotes/Java/","/zh/posts/LearningNotes/Networks/","/zh/posts/LearningNotes/Python/","/zh/posts/LearningNotes/System/","/zh/posts/LearningNotes/liunx/","/zh/posts/LearningNotes/principles/","/zh/posts/OtherTutorials/Note/","/zh/posts/OtherTutorials/OverWall/","/zh/posts/OtherTutorials/encoding/","/zh/posts/SpringAll/SpingBoot/","/zh/posts/SpringAll/Spring/","/zh/posts/SpringAll/SpringCloud/","/zh/posts/SpringAll/SpringMVC/","/zh/posts/ToolSet/Docker/","/zh/posts/ToolSet/Git/","/zh/posts/ToolSet/Github/","/zh/posts/ToolSet/Maven/","/zh/posts/ToolSet/MySQL/","/zh/posts/ToolSet/Navicat/","/zh/posts/ToolSet/Postman/","/zh/posts/ToolSet/Redis/","/404.html","/posts/","/posts/FrameSet/","/posts/FrontEnd/","/posts/LearningNotes/","/posts/SpringAll/","/posts/ToolSet/","/zh/posts/","/zh/posts/FrameSet/","/zh/posts/FrontEnd/","/zh/posts/LearningNotes/","/zh/posts/SpringAll/","/zh/posts/ToolSet/","/category/","/category/blog/","/category/%E4%B8%AA%E4%BA%BA%E7%AE%80%E4%BB%8B/","/category/guide/","/zh/category/","/zh/category/blog/","/zh/category/%E4%B8%AA%E4%BA%BA%E7%AE%80%E4%BB%8B/","/zh/category/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/zh/category/%E6%8C%87%E5%8D%97/","/tag/","/tag/%E5%B7%A5%E5%85%B7%E9%9B%86/","/tag/blog/","/tag/%E4%B8%AA%E4%BA%BA%E7%AE%80%E4%BB%8B/","/tag/disable/","/tag/encryption/","/tag/layout/","/tag/markdown/","/tag/page-config/","/tag/guide/","/zh/tag/","/zh/tag/%E5%B7%A5%E5%85%B7%E9%9B%86/","/zh/tag/blog/","/zh/tag/%E4%B8%AA%E4%BA%BA%E7%AE%80%E4%BB%8B/","/zh/tag/%E7%A6%81%E7%94%A8/","/zh/tag/%E5%8A%A0%E5%AF%86/","/zh/tag/%E5%B8%83%E5%B1%80/","/zh/tag/markdown/","/zh/tag/%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE/","/zh/tag/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/article/","/zh/article/","/star/","/zh/star/","/timeline/","/zh/timeline/"],Ae="SEARCH_PRO_QUERY_HISTORY",d=K(Ae,[]),Be=()=>{const{queryHistoryCount:o}=Q,a=o>0;return{enabled:a,queryHistory:d,addQueryHistory:l=>{a&&(d.value.length<o?d.value=Array.from(new Set([l,...d.value])):d.value=Array.from(new Set([l,...d.value.slice(0,o-1)])))},removeQueryHistory:l=>{d.value=[...d.value.slice(0,l),...d.value.slice(l+1)]}}},w=o=>Ee[o.id]+("anchor"in o?`#${o.anchor}`:""),De="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:H}=Q,g=K(De,[]),Le=()=>{const o=H>0;return{enabled:o,resultHistory:g,addResultHistory:a=>{if(o){const l={link:w(a),display:a.display};"header"in a&&(l.header=a.header),g.value.length<H?g.value=[l,...g.value]:g.value=[l,...g.value.slice(0,H-1)]}},removeResultHistory:a=>{g.value=[...g.value.slice(0,a),...g.value.slice(a+1)]}}},Te=o=>{const a=pe(),l=V(),N=he(),n=R(!1),y=ce([]);return ve(()=>{const{search:A,terminate:m}=de(),B=()=>{y.value=[],n.value=!1},z=Se(c=>{n.value=!0,c?A(c,l.value,a.value).then(v=>{var D,S;return((S=(D=a.value).searchFilter)==null?void 0:S.call(D,v,c,l.value,N.value))??v}).then(v=>{y.value=v,n.value=!1}).catch(v=>{console.error(v),B()}):B()},Q.searchDelay);G([o,l],()=>z(o.value),{immediate:!0}),ge(()=>{m()})}),{searching:n,results:y}};var be=Z({name:"SearchResult",props:{query:{type:String,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(o,{emit:a}){const l=ee(),N=V(),n=te(se),{enabled:y,addQueryHistory:A,queryHistory:m,removeQueryHistory:B}=Be(),{enabled:z,resultHistory:c,addResultHistory:v,removeResultHistory:D}=Le(),S=y||z,b=oe(o,"query"),{results:E,searching:I}=Te(b),r=ae({isQuery:!0,index:0}),p=R(0),h=R(0),M=C(()=>S&&(m.value.length>0||c.value.length>0)),f=C(()=>E.value.length>0),F=C(()=>E.value[p.value]||null),$=()=>{const{isQuery:e,index:t}=r;t===0?(r.isQuery=!e,r.index=e?c.value.length-1:m.value.length-1):r.index=t-1},J=()=>{const{isQuery:e,index:t}=r;t===(e?m.value.length-1:c.value.length-1)?(r.isQuery=!e,r.index=0):r.index=t+1},_=()=>{p.value=p.value>0?p.value-1:E.value.length-1,h.value=F.value.contents.length-1},U=()=>{p.value=p.value<E.value.length-1?p.value+1:0,h.value=0},W=()=>{h.value<F.value.contents.length-1?h.value+=1:U()},j=()=>{h.value>0?h.value-=1:_()},k=e=>e.map(t=>me(t)?t:s(t[0],t[1])),Y=e=>{if(e.type==="customField"){const t=ye[e.index]||"$content",[i,T=""]=ze(t)?t[N.value].split("$content"):t.split("$content");return e.display.map(u=>s("div",k([i,...u,T])))}return e.display.map(t=>s("div",k(t)))},L=()=>{p.value=0,h.value=0,a("updateQuery",""),a("close")};return le("keydown",e=>{if(o.isFocusing){if(f.value){if(e.key==="ArrowUp")j();else if(e.key==="ArrowDown")W();else if(e.key==="Enter"){const t=F.value.contents[h.value];A(o.query),v(t),l.push(w(t)),L()}}else if(z){if(e.key==="ArrowUp")$();else if(e.key==="ArrowDown")J();else if(e.key==="Enter"){const{index:t}=r;r.isQuery?(a("updateQuery",m.value[t]),e.preventDefault()):(l.push(c.value[t].link),L())}}}}),G([p,h],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>s("div",{class:["search-pro-result-wrapper",{empty:b.value?!f.value:!M.value}],id:"search-pro-results"},b.value===""?S?M.value?[y?s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},n.value.queryHistory),m.value.map((e,t)=>s("div",{class:["search-pro-result-item",{active:r.isQuery&&r.index===t}],onClick:()=>{a("updateQuery",e)}},[s(O,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},e),s("button",{class:"search-pro-remove-icon",innerHTML:P,onClick:i=>{i.preventDefault(),i.stopPropagation(),B(t)}})]))])):null,z?s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},n.value.resultHistory),c.value.map((e,t)=>s(q,{to:e.link,class:["search-pro-result-item",{active:!r.isQuery&&r.index===t}],onClick:()=>{L()}},()=>[s(O,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[e.header?s("div",{class:"content-header"},e.header):null,s("div",e.display.map(i=>k(i)).flat())]),s("button",{class:"search-pro-remove-icon",innerHTML:P,onClick:i=>{i.preventDefault(),i.stopPropagation(),D(t)}})]))])):null]:n.value.emptyHistory:n.value.emptyResult:I.value?s(re,{hint:n.value.searching}):f.value?s("ul",{class:"search-pro-result-list"},E.value.map(({title:e,contents:t},i)=>{const T=p.value===i;return s("li",{class:["search-pro-result-list-item",{active:T}]},[s("div",{class:"search-pro-result-title"},e||n.value.defaultTitle),t.map((u,X)=>{const x=T&&h.value===X;return s(q,{to:w(u),class:["search-pro-result-item",{active:x,"aria-selected":x}],onClick:()=>{A(o.query),v(u),L()}},()=>[u.type==="text"?null:s(u.type==="title"?ne:u.type==="heading"?ie:ue,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[u.type==="text"&&u.header?s("div",{class:"content-header"},u.header):null,s("div",Y(u))])])})])})):n.value.emptyResult)}});export{be as default};
